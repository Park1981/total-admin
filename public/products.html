<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNITECH PORTAL - 제품관리</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/products.css">

</head>
<body class="app-shell">
    <!-- 헤더 -->
    <div id="app-header"></div>

    <!-- 메인 컨텐츠 -->
    <main class="dashboard-main">
        <!-- 페이지 헤더 -->
        <div class="card" style="margin-bottom: var(--spacing-xl);">
            <div class="card-header">
                <div>
                    <nav class="breadcrumb" style="margin-bottom: var(--spacing-sm);">
                        <a href="dashboard.html">대시보드</a>
                        <span>/</span>
                        <span>제품관리</span>
                    </nav>
                    <h1 style="font-size: 2rem; margin: 0;">제품관리</h1>
                    <p style="color: var(--text-secondary); margin-top: var(--spacing-xs);">제품 템플릿 및 옵션 관리 시스템</p>
                </div>
                <div class="card-actions">
                    <button class="btn btn-secondary btn-icon" type="button" onclick="refreshProducts()" aria-label="제품 목록 새로고침">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="btn btn-primary" type="button" onclick="showAddProductForm()">
                        <i class="fas fa-plus"></i>
                        새 제품 추가
                    </button>
                    <a class="btn btn-secondary" href="products_v2.html" style="text-decoration: none;">
                        <i class="fas fa-vial"></i>
                        v2 실험 보기
                    </a>
                </div>
            </div>
        </div>

        <!-- 제품 목록 -->
        <div id="templates-tab" class="card">
            <div class="card-header">
                <h2 class="card-title">등록된 제품 템플릿</h2>
                <span id="product-count" class="badge badge--neutral">총 0개</span>
            </div>
            <div class="card-body">
                <div id="products-grid" class="grid grid--auto">
                    <!-- 제품 목록이 여기에 로드됩니다 -->
                </div>
            </div>
        </div>

        <!-- 제품 추가 폼 (기본 숨김) -->
        <div id="add-tab" style="display: none; margin-top: var(--spacing-xl);">
            <div class="card">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">새 제품 템플릿 추가</h2>
                        <p class="card-subtitle">기본 제품 템플릿을 생성하고 다양한 옵션을 설정할 수 있습니다.</p>
                    </div>
                    <button class="btn btn-secondary" onclick="hideAddProductForm()" type="button">
                        <i class="fas fa-times"></i>
                        닫기
                    </button>
                </div>
                <div class="card-body">

                <!-- 제품 추가 폼 -->
                <form id="addProductForm" class="product-form">
                    <!-- 기본 정보 섹션 -->
                    <div class="form-section">
                        <h4 class="section-title">
                            <i class="fas fa-info-circle"></i>
                            기본 정보
                        </h4>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="category">카테고리 *</label>
                                <select id="category" name="category" required>
                                    <option value="">카테고리 선택</option>
                                    <option value="CHAMBER">챔버시스템</option>
                                    <option value="EQUIPMENT">측정장비</option>
                                    <option value="PARTS">소모품</option>
                                    <option value="AUTOCLAVE">멸균기</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="isConsumable">소모품 여부</label>
                                <select id="isConsumable" name="is_consumable">
                                    <option value="false">일반 제품</option>
                                    <option value="true">소모품</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="templateCode">템플릿 코드 *</label>
                                <input type="text" id="templateCode" name="template_code"
                                       placeholder="예: CH-MEDIUM" required>
                                <small>영문 대문자, 숫자, 하이픈 사용 권장</small>
                            </div>

                            <div class="form-group">
                                <label for="templateName">제품명 *</label>
                                <input type="text" id="templateName" name="template_name"
                                       placeholder="예: 중형 챔버 시스템" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="description">제품 설명</label>
                            <textarea id="description" name="description" rows="3"
                                    placeholder="제품의 주요 특징과 용도를 설명해주세요."></textarea>
                        </div>
                    </div>

                    <!-- 기본 사양 섹션 -->
                    <div class="form-section">
                        <h4 class="section-title">
                            <i class="fas fa-cogs"></i>
                            기본 사양
                        </h4>

                        <div id="specifications-container">
                            <div class="spec-item">
                                <div class="spec-inputs">
                                    <input type="text" placeholder="사양명 (예: 온도범위)" class="spec-key">
                                    <input type="text" placeholder="값 (예: 15~30°C)" class="spec-value">
                                    <button type="button" class="btn-remove-spec" onclick="removeSpecification(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <button type="button" class="btn-add-spec" onclick="addSpecification()">
                            <i class="fas fa-plus"></i>
                            사양 추가
                        </button>
                    </div>

                    <!-- 제품 옵션 섹션 -->
                    <div class="form-section">
                        <h4 class="section-title">
                            <i class="fas fa-list"></i>
                            제품 옵션
                        </h4>

                        <div id="options-container">
                            <div class="option-group">
                                <div class="option-header">
                                    <input type="text" placeholder="옵션 타입 (예: size)" class="option-type">
                                    <input type="text" placeholder="옵션 라벨 (예: 크기)" class="option-type-label">
                                    <button type="button" class="btn-remove-option-group" onclick="removeOptionGroup(this)">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>

                                <div class="option-values">
                                    <div class="option-value-item">
                                        <input type="text" placeholder="옵션 값 (예: 24m³)" class="option-value">
                                        <input type="text" placeholder="표시 라벨 (예: 24m³ (4.0×3.0×2.0m))" class="option-label">
                                        <input type="checkbox" class="option-default" title="기본 선택">
                                        <button type="button" class="btn-remove-option-value" onclick="removeOptionValue(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>

                                <button type="button" class="btn-add-option-value" onclick="addOptionValue(this)">
                                    <i class="fas fa-plus"></i>
                                    옵션 값 추가
                                </button>
                            </div>
                        </div>

                        <button type="button" class="btn-add-option-group" onclick="addOptionGroup()">
                            <i class="fas fa-plus"></i>
                            옵션 그룹 추가
                        </button>
                    </div>

                    <!-- 폼 액션 -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            <i class="fas fa-undo"></i>
                            초기화
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            제품 템플릿 저장
                        </button>
                    </div>
                </form>
                </div>
            </div>
        </div>
    </main>

    <!-- 푸터 -->
    <div id="app-footer"></div>

    <!-- 토스트 메시지 컨테이너 -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="js/common.js"></script>
    <script src="js/products.js"></script>
    <script>
        if (typeof renderAppFooter === 'function') {
            renderAppFooter();
        }
    </script>
</body>
</html>
